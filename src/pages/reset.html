<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
<script>
	window.jQuery = window.$ = require('jquery');
</script>
<link rel="stylesheet" href="https://cdn.snaildos.com/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.snaildos.com/w3.css">
<script src="https://cdn.snaildos.com/jquery.min.js"></script>
<script src="https://cdn.snaildos.com/bootstrap.min.js"></script>
<title>Resetting StreamBop...</title>
<style type="text/css">
	.bs-example{
		margin: 20px;
	}

	body {
		background: black;
	}
</style>
</head>
<body>
	<script>
		const { ipcRenderer } = require('electron');
	    const fs = require('fs');
		const Store = require('electron-store');
        const config = new Store();
		ipcRenderer.send('strm.hide')
        ipcRenderer.send('strm.reload')
		console.log("Let's clear localstorage first...")
        localStorage.clear();
		console.log("Just wait a bit...")
		// If all above fails, lets do some ensurement.
		fs.unlinkSync(config.path)

	</script>
	<div class="bs-example w3-center">
		<h2>Resetting StreamBop...</h2>
		<div class="progress">
			<div class="progress-bar" id="bar">
				<span class="sr-only">src</span>
			</div>
		</div>
		<script type="text/javascript">
			var i = 0;
			var progressBar = $("#bar");
			function countNumbers(){
				if(i < 100){
					i = i + 10;
					progressBar.css("width", i + "%");
				}
				if(i > 90){
					window.location.href = "restart.html";
				}
				// Wait for sometime before running this script again
				setTimeout("countNumbers()", 1000);
			}
			countNumbers();
		</script>
	</div>
</body>
</html>